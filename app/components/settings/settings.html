<div id="settings" *ngIf="ready"
     (dragover)="false"
     (dragleave)="false"
     (drop)="false">

    <header>
        <h1>
            <span class="mdi mdi-settings"></span>
            Einstellungen

            <div style="float: right;">

                <button id="save-settings-button" class="btn-success btn"
                        style="text-align:right;"
                        [ngClass]="{ 'disabled': saving }"
                        (click)="saving || save()">
                    <span class="mdi mdi-content-save"></span>
                    <span class="button-label">
                        Einstellungen übernehmen
                    </span>

                </button>
            </div>

        </h1>
    </header>

    <main>
        <div class="form-group row">

            <div class="col-lg-6 mx-lg-auto">

                <div class="form-group" style="margin-bottom: 0;">

                    <label class="control-label col-form-label"
                           for="username-input">Name des Bearbeiters
                    </label>
                    <span placement="right" ngbTooltip="Dieser Name wird in der Bearbeitungshistorie gespeichert, damit Änderungen an Datensätzen einer Person zugeordnet werden können. In der Regel sollte hier der volle Name des aktuellen Datenbanknutzers eingetragen werden." class="mdi mdi-information-outline"></span>
                    <input id="username-input"
                           [ngModel]="settings.username"
                           (ngModelChange)="settings.username = $event"
                           class="form-control">
                </div>

                <div class="form-group" style="margin-bottom: 0;">

                    <label class="control-label col-form-label"
                           for="imagestorepath-input">Pfad zum Bilderverzeichnis
                    </label>
                    <div class="input-group">
                        <input id="imagestorepath-input"
                               [ngModel]="settings.imagestorePath"
                               (ngModelChange)="settings.imagestorePath = $event"
                               class="form-control">
                        <span class="input-group-btn">
                            <input id="imagestorepath-file" type="file" webkitdirectory directory
                                   (change)="settings.imagestorePath = $event.target.files[0].path + '/'"
                                   style="display: none">
                            <label for="imagestorepath-file" class="btn btn-secondary">
                                <span class="mdi mdi-folder"></span>
                            </label>
                        </span>
                    </div>
                </div>

                <div class="form-group" style="margin-bottom: 0;">

                    <label class="control-label col-form-label"
                           for="model3dstorepath-input">Pfad zum 3D-Modell-Verzeichnis
                    </label>
                    <div class="input-group">
                        <input id="model3dstorepath-input"
                               [ngModel]="settings.model3DStorePath"
                               (ngModelChange)="settings.model3DStorePath = $event"
                               class="form-control">
                        <span class="input-group-btn">
                            <input id="model3dstorepath-file" type="file" webkitdirectory directory
                                   (change)="settings.model3DStorePath = $event.target.files[0].path + '/'"
                                   style="display: none">
                            <label for="model3dstorepath-file" class="btn btn-secondary">
                                <span class="mdi mdi-folder"></span>
                            </label>
                        </span>
                    </div>
                </div>

                <h5 style="margin-top: 32px;">Synchronisierungseinstellungen</h5>

                <div class="row" style="margin: 15px 0 0;">
                    <div class="col-auto mr-auto">
                        Synchronisierung aktivieren
                    </div>
                    <div class="col-auto">
                        <label class="switch" style="margin-bottom: 0;">
                            <input type="checkbox" [checked]="settings.isSyncActive"
                                   (change)="toggleSync()">
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>

                <div class="form-group">

                    <label for="sync-target-address-input"
                           class="control-label col-form-label">Adresse</label>
                    <input id="sync-target-address-input" [ngModel]="settings.syncTarget.address"
                           (ngModelChange)="settings.syncTarget.address = $event"
                           class="form-control">

                    <label for="sync-target-username-input"
                           class="control-label col-form-label">Benutzer</label>
                    <input id="sync-target-username-input" [ngModel]="settings.syncTarget.username"
                           (ngModelChange)="settings.syncTarget.username = $event"
                           class="form-control">

                    <label for="sync-target-password-input"
                           class="control-label col-form-label">Passwort</label>
                    <input id="sync-target-password-input"
                           type="password"
                           [ngModel]="settings.syncTarget.password"
                           (ngModelChange)="settings.syncTarget.password = $event"
                           class="form-control">

                    <label class="control-label col-form-label">
                        Eigene Adresse: http://{{ipAddress}}:3000
                    </label>
                    <div class="settings-info">
                        Diese Adresse kann in anderen iDAI.field-Clients eingetragen werden, um
                        eine Synchronisationsverbindung zu diesem Client herzustellen.
                    </div>
                </div>
            </div>
        </div>
    </main>

</div>

