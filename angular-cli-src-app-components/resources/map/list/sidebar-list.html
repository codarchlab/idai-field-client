<context-menu *ngIf="contextMenu.isOpen()"
              [contextMenu]="contextMenu"
              (onSelectAction)="performContextMenuAction($event)"></context-menu>

<popover-menu [document]="viewFacade.getSelectedDocument()"></popover-menu>

<ul #sidebar id="sidebar" class="resources-listing" [class.scrollbar-visible]="isScrollbarVisible(sidebar)"
    tabindex="0" (scroll)="contextMenu.close()" (keydown)="onKeyDown($event)">
    <li *ngFor="let document of viewFacade.getDocuments()"
        class="resources-listing-item resources-listing-item-wide"
        (mouseover)="highlightDocument(document)"
        (mouseleave)="highlightDocument(undefined)"
        (contextmenu)="contextMenu.open($event, document)"
        [class.new-from-remote]="viewFacade.isNewDocumentFromRemote(document)"
        [class.conflicted]="document['_conflicts']"
        [class.selected]="viewFacade.getSelectedDocument()
                && viewFacade.getSelectedDocument().resource.id === document.resource.id"
        [id]="'resource-' + document.resource.identifier">

        <list-button-group [document]="document"></list-button-group>

        <document-teaser (click)="select(document)"
                         (dblclick)="editDocument(document)"
                         [document]="document"></document-teaser>
    </li>
</ul>

<plus-button *ngIf="isPlusButtonShown()" id="create-document-button" [placement]="'top'"
             [preselectedCategory]="getCurrentFilterCategory()"
             [liesWithin]="getSelectedSegmentDoc()"
             [isRecordedIn]="viewFacade.getCurrentOperation()"
             [status]="getPlusButtonStatus()"></plus-button>
<loading-icon></loading-icon>